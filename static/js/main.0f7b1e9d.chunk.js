(this.webpackJsonpsonicspot=this.webpackJsonpsonicspot||[]).push([[0],{129:function(e,t,n){},143:function(e,t,n){},175:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(60),s=n.n(o),a=(n(175),n(27)),i=n(11),l=n(10),u=n(1),d=Object(c.createContext)(),j=function(e){var t=Object(c.useState)(0),n=Object(l.a)(t,2),r=n[0],o=n[1],s=Object(c.useState)(""),a=Object(l.a)(s,2),j=a[0],h=a[1],b=Object(c.useState)(""),g=Object(l.a)(b,2),O=g[0],f=(g[1],Object(c.useState)([{}])),m=Object(l.a)(f,2),x=m[0],p=m[1],y=Object(c.useState)(""),C=Object(l.a)(y,2),k=C[0],S=C[1],v=Object(c.useState)({}),w=Object(l.a)(v,2),A=w[0],I=w[1],N=Object(c.useState)([]),z=Object(l.a)(N,2),T=z[0],R=z[1],P=Object(c.useState)([]),B=Object(l.a)(P,2),G=B[0],H=(B[1],Object(c.useState)("")),M=Object(l.a)(H,2),U=M[0],D=(M[1],Object(c.useState)("")),F=Object(l.a)(D,2),_=F[0],L=F[1],E=Object(c.useState)(""),W=Object(l.a)(E,2),Y=W[0],q=W[1],J=Object(c.useState)(""),K=Object(l.a)(J,2),V=K[0],X=K[1],Z=Object(c.useState)(""),Q=Object(l.a)(Z,2),$=Q[0],ee=Q[1],te=localStorage.getItem("sonic_user"),ne=Object(i.f)(),ce=[],re=function(e){console.log(U);var t=localStorage.getItem("spotifyAuthToken"),n=new Headers;n.append("Authorization","Bearer ".concat(t)),n.append("Content-Type","text/plain");var c={method:"PUT",headers:n,body:'{\r\n  "uris":['.concat(ce,'],\r\n  "offset": {\r\n    "position":0\r\n  },\r\n  "position_ms": 0\r\n}'),redirect:"follow"};fetch("https://api.spotify.com/v1/me/player/play?device_id=".concat(e),c).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)})).then(oe)},oe=function(){var e=new Headers,t=localStorage.getItem("spotifyAuthToken");e.append("Authorization","Bearer ".concat(t)),fetch("https://api.spotify.com/v1/me/player/currently-playing",{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){p([{artistName:e.item.artists[0].name,songName:e.item.name,uri:e.item.uri}]),ee(e.item.album.images[0].url)}))};return Object(u.jsx)(d.Provider,{value:{getUri:function(e){return fetch("https://sonicserve.herokuapp.com/categories/".concat(e)).then((function(e){return e.json()})).then((function(e){console.log(e.writeup),h(e.spotifyPlaylistUri),q(e.name),L(e.image),X(e.writeup)})).then(o(e))},categoryId:r,playerId:O,getPlayerIdStartPlayer:function(){var e=new Headers,t=localStorage.getItem("spotifyAuthToken");e.append("Authorization","Bearer ".concat(t)),fetch("https://api.spotify.com/v1/me/player/devices",{method:"GET",headers:e,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){return re(e.devices[0].id)})).then(oe).catch((function(e){return ne.push("./login")}))},startTrack:re,nextTrack:function(){var e=new Headers,t=localStorage.getItem("spotifyAuthToken");e.append("Authorization","Bearer ".concat(t)),fetch("https://api.spotify.com/v1/me/player/next",{method:"POST",headers:e,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){return console.log(e)})).then(oe).catch((function(e){return console.log("error",e)}))},getTrackInfo:oe,trackInfo:x,getUserName:function(){return fetch("https://sonicserve.herokuapp.com/users/".concat(te)).then((function(e){return e.json()})).then((function(e){return e.userName})).then(S)},userName:k,handleLogoutClick:function(){localStorage.setItem("sonic_user","undefined"),localStorage.setItem("spotifyAuthToken","undefined"),ne.push("/login")},getCurrentUserObject:function(e){return fetch("https://sonicserve.herokuapp.com/users/".concat(e)).then((function(e){return e.json()})).then(I)},currentUserObject:A,setCurrentGameRecord:function(e){fetch("https://sonicserve.herokuapp.com/games",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score:e.score,categoryId:e.category,userId:e.userId,artistGuessCorrect:e.artistGuessCorrect,songGuessCorrect:e.songGuessCorrect,avgAnswerTime:e.avgAnswerTime,songsPlayed:e.songsPlayed})})},getGames:function(){return fetch("https://sonicserve.herokuapp.com/games?_expand=user&_expand=category").then((function(e){return e.json()})).then(R)},games:T,getPlaylistAndShuffle:function(){var e=new Headers,t=localStorage.getItem("spotifyAuthToken");e.append("Authorization","Bearer ".concat(t));var n={method:"GET",headers:e,redirect:"follow"};return fetch("https://api.spotify.com/v1/playlists/".concat(j,"/tracks?market=us&fields=items(track(uri))&limit=100"),n).then((function(e){return e.json()})).then((function(e){var t=e.items.map((function(e){return JSON.stringify(e.track.uri)}));t=t.sort((function(){return Math.random()-.5})),ce=t})).catch((function(e){return ne.push("./login")}))},localPlaylist:G,playlistImage:_,currentImage:$,categoryName:Y,albumWriteup:V},children:e.children})},h=n(43),b=n(158),g=n(206),O=n(86),f=function(e){var t=e.endGame,n=Object(c.useState)(90),r=Object(l.a)(n,2),o=r[0],s=r[1],a=Object(c.useState)(0),i=Object(l.a)(a,2),d=i[0],j=i[1];function h(){0==d&&0==o?t():0==o?(j((function(e){return e-1})),s(59)):s((function(e){return e-1}))}return Object(c.useEffect)((function(){var e=setTimeout(h,1e3);return function(){clearTimeout(e)}})),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(g.a,{size:"huge",children:[Object(u.jsx)(O.a,{bordered:!0,name:"clock outline"}),"Remaining: ",o]})})},m=n(200),x=n(210),p=n(198),y=n(199),C=n(208),k=n(205),S=n(201),v=n(159),w=n(204);function A(e){var t=e.artistResponse,n=e.songResponse;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(w.a,{fluid:!0,style:{backgroundColor:"",width:830,height:50},children:n.includes("!")?Object(u.jsx)(g.a,{style:{color:"green",fontSize:20},children:n}):Object(u.jsx)(g.a,{style:{color:"red",fontSize:20},children:n})}),Object(u.jsx)(w.a,{style:{backgroundColor:"",width:830,marginTop:20,height:50},children:t.includes("!")?Object(u.jsx)(g.a,{style:{color:"green",fontSize:20},children:t}):Object(u.jsx)(g.a,{style:{color:"red",fontSize:20},children:t})})]})}var I=n(136),N=(n(183),0),z=0,T=0,R=[],P=function(){var e=Object(i.f)(),t=r.a.useState(!1),n=Object(l.a)(t,2),o=n[0],s=n[1],a=r.a.useState(!0),j=Object(l.a)(a,2),w=j[0],P=j[1],B=r.a.useState(!1),G=Object(l.a)(B,2),H=G[0],M=G[1],U=r.a.useState(""),D=Object(l.a)(U,2),F=D[0],_=D[1],L=r.a.useState(""),E=Object(l.a)(L,2),W=E[0],Y=E[1],q=Object(c.useState)(0),J=Object(l.a)(q,2),K=J[0],V=J[1],X=Object(c.useContext)(d),Z=X.getPlayerIdStartPlayer,Q=X.nextTrack,$=X.trackInfo,ee=X.handleLogoutClick,te=X.setCurrentGameRecord,ne=X.categoryId,ce=X.currentUserObject,re=X.getPlaylistAndShuffle,oe=X.categoryName,se=X.playlistImage,ae=X.currentImage,ie=X.albumWriteup,le=Object(c.useState)({answerSong:"",answerArtist:""}),ue=Object(l.a)(le,2),de=ue[0],je=ue[1],he=function(e){var t=Object(h.a)({},de);t[e.target.name]=e.target.value,je(t)},be=function(){!function(e,t){var n,c=t.answerSong;N+=1,(n=new I.a(e,{keys:["songName"],includeScore:!0}).search(c))[0]&&n[0].score<.4?ge():Oe()}($,de),function(e,t){var n,c=t.answerArtist;(n=new I.a(e,{keys:["artistName"],includeScore:!0}).search(c))[0]&&n[0].score<.4?fe():me()}($,de),je({answerSong:"",answerArtist:""}),R.push({trackName:$[0].songName,artistName:$[0].artistName,uri:$}),console.log(R),Q()},ge=function(){V((function(e){return e+1})),_('Thats it!!!! the song is "'.concat($[0].songName,'". You earn 1 point!')),T+=1},Oe=function(){_('Better luck next time. The name of this song is "'.concat($[0].songName,'"'))},fe=function(){V((function(e){return e+1})),Y('Thats it!!!! the song is by"'.concat($[0].artistName,'" You earn 1 point!')),z+=1},me=function(){Y('Wrong. That was a song by "'.concat($[0].artistName,'"'))},xe=function(){Z(),N+=1,console.log("here")};return Object(c.useEffect)((function(){}),[]),Object(u.jsxs)("div",{className:"gameDiv",children:[Object(u.jsxs)(m.a,{style:{backgroundColor:"",height:10,fontSize:20},children:[Object(u.jsx)(m.a.Menu,{position:"left",children:Object(u.jsx)(m.a.Item,{position:"left",name:"leaderboard",onClick:function(){return e.push("./leaderboard")},children:"Leaderboard"})}),Object(u.jsxs)(m.a.Menu,{position:"right",children:[Object(u.jsxs)(m.a.Item,{position:"right",name:"user",onClick:function(){return e.push("/stats")},children:["Welcome ",ce.userName]}),Object(u.jsx)(m.a.Item,{name:"logout",onClick:ee})]})]}),Object(u.jsx)(x.a.Row,{style:{color:"white",backgroundColor:"#121212",height:10,fontSize:35},children:Object(u.jsx)(g.a,{style:{color:"white",backgroundColor:"",height:300,fontSize:45},textAlign:"center",children:"Can You Hear The Music"})}),Object(u.jsx)(x.a.Row,{style:{color:"",backgroundColor:"#121212",height:100,fontSize:35},children:Object(u.jsx)(g.a,{style:{color:"white",backgroundColor:"",height:200,fontSize:45},textAlign:"center"})}),Object(u.jsx)(x.a,{textAlign:"center",verticalAlign:"middle",style:{backgroundColor:"#121212"},children:Object(u.jsxs)(x.a.Column,{style:{maxWidth:900},children:[Object(u.jsxs)(g.a,{dividing:!0,textAlign:"center",centered:!0,style:{backgroundColor:"white",fontSize:30,height:35},children:["You currently have ",K," points!"]}),Object(u.jsx)(p.a,{fluid:!0,style:{color:"white",backgroundColor:"white",height:50,fontSize:10},children:H?Object(u.jsx)(f,{endGame:function(){console.log("endgame"),s(!0)}}):""}),Object(u.jsx)(y.a,{size:"large",children:Object(u.jsxs)(C.a,{stacked:!0,style:{backgroundColor:"#1DB954"},children:[Object(u.jsx)(y.a.Input,{focus:"true",style:{color:"yellow"},size:"big",placeholder:"Song Title",name:"answerSong",id:"answerSong",value:de.answerSong,onChange:he}),Object(u.jsx)(y.a.Input,{size:"big",placeholder:"Artist Name",name:"answerArtist",id:"answerArtist",value:de.answerArtist,onChange:he}),Object(u.jsxs)(k.a,{animated:!0,size:"huge",onClick:function(e){e.preventDefault(),be()},children:[Object(u.jsx)(k.a.Content,{visible:!0,children:"Next Song"}),Object(u.jsx)(k.a.Content,{hidden:!0,children:Object(u.jsx)(O.a,{name:"fast forward"})})]}),Object(u.jsx)(A,{songResponse:F,artistResponse:W})]})})]})}),Object(u.jsxs)(S.a,{size:"large",onClose:function(){return P(!1)},onOpen:function(){return P(!0)},open:w,children:[Object(u.jsx)(S.a.Header,{children:"Are You ready?"}),Object(u.jsxs)(S.a.Content,{image:!0,children:[Object(u.jsx)(v.a,{size:"large",src:se,wrapped:!0}),Object(u.jsxs)(S.a.Description,{children:[Object(u.jsx)(g.a,{style:{fontSize:30,backgroundColor:"#1DB954"},children:oe}),Object(u.jsx)(p.a,{style:{fontSize:15},children:Object(u.jsx)(g.a,{children:ie})})]})]}),Object(u.jsxs)(S.a.Actions,{children:[Object(u.jsx)(k.a,{content:"Back To Menu",labelPosition:"center",icon:"caret square left",color:"black",onClick:function(t){t.preventDefault(),P(!1),e.push("/")}}),Object(u.jsx)(k.a,{content:"Play!",labelPosition:"right",icon:"checkmark",onClick:function(e){e.preventDefault(),P(!1),re().then(xe),M(!0)},positive:!0})]})]}),Object(u.jsxs)(S.a,{onClose:function(){return s(!1)},onOpen:function(){return s(!0)},open:o,children:[Object(u.jsx)(S.a.Header,{children:Object(u.jsx)("h2",{class:"ui block blue header",children:"It's all over now"})}),Object(u.jsxs)(S.a.Content,{image:!0,children:[Object(u.jsx)(v.a,{size:"medium",src:ae,wrapped:!0}),Object(u.jsxs)(S.a.Description,{children:[Object(u.jsx)(g.a,{children:"This is the end"}),Object(u.jsxs)("h2",{class:"ui block header",children:["Your final score is ",K]})]})]}),Object(u.jsx)(S.a.Actions,{children:Object(u.jsx)(k.a,{content:"Take me Back",labelPosition:"right",icon:"checkmark",onClick:function(t){console.log("im runnign"),te({score:K,category:ne,userId:localStorage.getItem("sonic_user"),artistGuessCorrect:z,songGuessCorrect:T,avgAnswerTime:0,songsPlayed:N}),s(!1),e.push("/")},positive:!0})})]}),Object(u.jsx)(x.a.Row,{style:{color:"white",backgroundColor:"#121212",height:300,fontSize:35}}),Object(u.jsx)("div",{children:Object(u.jsx)(b.a,{token:localStorage.getItem("spotifyAuthToken"),uris:["spotify:track:0BM8wPzuihqUE561Poj2b7","spotify:track:4OpB5ExXiVjj1f3gMfTw4u","spotify:track:5i3m1HZBzurdMu9zzjBY7r"],styles:{activeColor:"black",bgColor:"black",color:"black",loaderColor:"black",sliderColor:"black",sliderTrackColor:"black",sliderHandleColor:"black",trackArtistColor:"black",trackNameColor:"black",height:0}})})]})},B=n(203),G=(n(129),function(){var e=Object(i.f)(),t=Object(c.useContext)(d),n=t.getUri,r=t.handleLogoutClick,o=t.currentUserObject,s=t.getCurrentUserObject,a=function(t){n(t),e.push("/game")};return Object(c.useEffect)((function(){s(localStorage.getItem("sonic_user")),console.log("First thing I remember knowin', is a lonesome whistle blowin' ,and a yougins dream of growing up to ride. On a freight train leavin' town, not knowin' where Im bound...")}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"selectScreen",children:[Object(u.jsxs)(m.a,{style:{backgroundColor:"white",height:10,fontSize:20},children:[Object(u.jsx)(m.a.Menu,{position:"left",children:Object(u.jsx)(m.a.Item,{position:"left",name:"leaderboard",onClick:function(){return e.push("./leaderboard")},children:"Leaderboard"})}),Object(u.jsxs)(m.a.Menu,{position:"right",children:[Object(u.jsxs)(m.a.Item,{position:"right",name:"user",onClick:function(){return e.push("/stats")},children:["Welcome ",o.userName]}),Object(u.jsx)(m.a.Item,{name:"logout",onClick:r})]})]}),Object(u.jsx)(x.a.Row,{style:{color:"white",backgroundColor:"#222222",height:100,fontSize:35},children:Object(u.jsx)(g.a,{style:{color:"white",backgroundColor:"",height:200,fontSize:55},textAlign:"center",children:"Select a Category"})}),Object(u.jsxs)(x.a,{columns:3,textAlign:"center",style:{backgroundColor:"#222222",height:"",fontSize:20},children:[Object(u.jsxs)(x.a.Row,{children:[Object(u.jsx)(x.a.Column,{stackable:!0,children:Object(u.jsxs)(B.a,{style:{backgroundColor:"#1db954",height:380,fontSize:20},centered:"true",stackable:"true",onClick:function(e){a(1)},children:[Object(u.jsx)(v.a,{src:"https://i.scdn.co/image/ab67706f00000003a9a72d13a1164e672fe6301f",size:"medium",wrapped:!0,ui:!0}),Object(u.jsx)(B.a.Content,{children:Object(u.jsx)(B.a.Header,{children:"Prime Country"})})]})}),Object(u.jsx)(x.a.Column,{children:Object(u.jsxs)(B.a,{style:{backgroundColor:"#1db954",height:380,fontSize:20},centered:"true",stackable:"true",onClick:function(e){a(2)},children:[Object(u.jsx)(v.a,{src:"https://i.scdn.co/image/ab67706c0000bebbad3f7fc6ca71742df49cfd1f",size:"medium",wrapped:!0,ui:!0}),Object(u.jsx)(B.a.Content,{children:Object(u.jsx)(B.a.Header,{children:"Hits of the 90s"})})]})}),Object(u.jsx)(x.a.Column,{children:Object(u.jsxs)(B.a,{style:{backgroundColor:"#1db954",height:380,fontSize:20},centered:"true",stackable:"true",onClick:function(e){a(3)},children:[Object(u.jsx)(v.a,{src:"https://mosaic.scdn.co/640/ab67616d0000b27361e11cce99aab86cb1ce253bab67616d0000b273dc30583ba717007b00cceb25ab67616d0000b273f05e5ac32fdd79d100315a20ab67616d0000b273fc4f17340773c6c3579fea0d",size:"medium",wrapped:!0,ui:!0}),Object(u.jsx)(B.a.Content,{children:Object(u.jsx)(B.a.Header,{children:"Greatest Hits of Classic Rock"})})]})})]}),Object(u.jsxs)(x.a.Row,{children:[Object(u.jsx)(x.a.Column,{children:Object(u.jsxs)(B.a,{style:{backgroundColor:"#1db954",height:380,fontSize:20,marginTop:20},centered:"true",stackable:"true",onClick:function(e){a(4)},children:[Object(u.jsx)(v.a,{src:"https://i.scdn.co/image/ab67706f000000035e98bc8db32dc5981d0df665",size:"medium",centered:!0,backgroundColor:"black",wrapped:!0,ui:!0}),Object(u.jsx)(B.a.Content,{children:Object(u.jsx)(B.a.Header,{children:"Best of the 80s"})})]})}),Object(u.jsx)(x.a.Column,{children:Object(u.jsxs)(B.a,{style:{marginTop:20,backgroundColor:"#1db954",height:380,fontSize:20},centered:"true",stackable:"true",onClick:function(e){a(5)},children:[Object(u.jsx)(v.a,{src:"https://i.scdn.co/image/ab67706f00000003ed3a8bb5b72ab5ccbf5834b8",size:"medium",wrapped:!0,ui:!0}),Object(u.jsx)(B.a.Content,{children:Object(u.jsx)(B.a.Header,{children:"The Beatles"})})]})}),Object(u.jsx)(x.a.Column,{children:Object(u.jsxs)(B.a,{style:{marginTop:20,backgroundColor:"#1db954",height:380,fontSize:20},centered:"true",stackable:"true",onClick:function(e){a(6)},children:[Object(u.jsx)(v.a,{src:"https://i.scdn.co/image/ab67706f00000003b5c1c133dc1d37f8a0eb7acb",size:"medium",wrapped:!0,ui:!0}),Object(u.jsx)(B.a.Content,{children:Object(u.jsx)(B.a.Header,{children:"Classic Country"})})]})})]})]})]})})}),H=n(156),M=n(202);n(143);function U(e){return console.log(e),Object(u.jsxs)(M.a.Row,{style:{backgroundColor:"#121212",color:"white"},children:[Object(u.jsx)(M.a.Cell,{children:e.score}),Object(u.jsx)(M.a.Cell,{children:e.categoryName}),Object(u.jsx)(M.a.Cell,{children:e.userName})]})}var D=function(){var e=Object(i.f)(),t=Object(c.useContext)(d),n=t.handleLogoutClick,r=t.currentUserObject,o=Object(c.useContext)(d),s=o.getGames,a=o.games.sort((function(e,t){return e.score>t.score?-1:1}));return Object(c.useEffect)((function(){s()}),[]),Object(u.jsxs)("div",{className:"leaderDiv",children:[Object(u.jsxs)(m.a,{style:{backgroundColor:"white",height:10,fontSize:20},children:[Object(u.jsx)(m.a.Menu,{position:"left",children:Object(u.jsx)(m.a.Item,{position:"left",name:"leaderboard",onClick:function(){return e.push("/")},children:"Game Select"})}),Object(u.jsxs)(m.a.Menu,{position:"right",children:[Object(u.jsxs)(m.a.Item,{position:"right",name:"user",onClick:function(){return e.push("/stats")},children:["Welcome ",r.userName]}),Object(u.jsx)(m.a.Item,{name:"logout",onClick:n})]})]}),Object(u.jsx)(x.a,{style:{backgroundColor:"#222222",height:"110vh",fontSize:23},children:Object(u.jsx)(H.a,{style:{backgroundColor:"#222222"},children:Object(u.jsxs)(p.a,{children:[Object(u.jsx)(g.a,{textAlign:"center",style:{backgroundColor:"#222222",color:"white"},size:"huge",children:"Top 10 scores"}),Object(u.jsx)(p.a,{children:Object(u.jsxs)(M.a,{padded:!0,singleLine:!0,size:"large",style:{backgroundColor:"#222222",color:"white"},children:[Object(u.jsx)(M.a.Header,{style:{backgroundColor:"#222222"},children:Object(u.jsxs)(M.a.Row,{style:{backgroundColor:"#222222"},children:[Object(u.jsx)(M.a.HeaderCell,{width:7,style:{backgroundColor:"#222222",color:"#1DB954"},children:"Score"}),Object(u.jsx)(M.a.HeaderCell,{width:8,style:{backgroundColor:"#222222",color:"#1DB954"},children:"Category"}),Object(u.jsx)(M.a.HeaderCell,{width:8,style:{backgroundColor:"#222222",color:"#1DB954"},children:"Name"})]})}),Object(u.jsx)(M.a.Body,{style:{backgroundColor:"#222222"},children:a.slice(0,10).map((function(e){return Object(u.jsx)(U,{score:e.score,id:e.id,userId:e.userId,categoryId:e.categoryId,userName:e.user.userName,categoryName:e.category.name},e)}))})]})}),Object(u.jsxs)(k.a,{animated:"fade",size:"massive",attached:"bottom",basic:!0,color:"green",onClick:function(t){e.push("/")},children:[Object(u.jsx)(k.a.Content,{visible:!0,children:"Back to main menu"}),Object(u.jsx)(k.a.Content,{hidden:!0,children:"GO!"})]})]})})})]})},F=n(157),_=(n(184),function(){var e,t,n=Object(i.f)(),r=Object(c.useContext)(d),o=r.handleLogoutClick,s=r.currentUserObject,a=Object(c.useContext)(d),l=a.getGames,j=a.games.filter((function(e){return e.userId===localStorage.getItem("sonic_user")}));console.log(j);j.length;var h=j.reduce((function(e,t){return e+t.score}),0),b=j.reduce((function(e,t){return e+t.songsPlayed}),0),O=j.reduce((function(e,t){return e+t.artistGuessCorrect+t.songGuessCorrect}),0),f=j.reduce((function(e,t){return e+t.artistGuessCorrect}),0),y=j.reduce((function(e,t){return e+t.songGuessCorrect}),0),C=Math.trunc(O/(2*b)*100),k=Math.trunc(y/b*100),S=Math.trunc(f/b*100),v=(j.reduce((function(e,t){return e+t.score}),0)/j.length).toFixed(1),w=null===j||void 0===j?void 0:j.sort((function(e,t){return e.score>t.score?-1:1})),A=2*b,I=null===(e=w[0])||void 0===e?void 0:e.score,N=null===(t=w[0])||void 0===t?void 0:t.category.name,z=function(e,t){var n,c={},r=Object(F.a)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;c[o]||(c[o]=0),c[o]++}}catch(s){r.e(s)}finally{r.f()}return Object.entries(c).sort((function(e,t){return t[1]-e[1]})).map((function(e){return parseInt(e[0])})).slice(0,t)}(j.map((function(e){return e.categoryId})),1),T=j.filter((function(e){return e.categoryId===z[0]})).map((function(e){return e.category.name}));return Object(c.useEffect)((function(){l()}),[]),Object(u.jsxs)("div",{className:"statsDiv",children:[Object(u.jsxs)(m.a,{style:{backgroundColor:"white",height:10,fontSize:20},children:[Object(u.jsx)(m.a.Menu,{position:"left",children:Object(u.jsx)(m.a.Item,{position:"left",name:"Select",onClick:function(){return n.push("./")},children:"Game Select"})}),Object(u.jsxs)(m.a.Menu,{position:"right",children:[Object(u.jsxs)(m.a.Item,{position:"right",name:"user",onClick:function(){return n.push("/stats")},children:["Welcome ",s.userName]}),Object(u.jsx)(m.a.Item,{name:"logout",onClick:o})]})]}),Object(u.jsx)(x.a,{style:{backgroundColor:"#121212",fontSize:23},children:Object(u.jsx)(H.a,{children:Object(u.jsx)(p.a,{children:Object(u.jsx)(g.a,{textAlign:"center",style:{height:100,color:"#121212"}})})})}),Object(u.jsx)(x.a,{style:{backgroundColor:"#121212"},children:Object(u.jsx)(x.a.Column,{children:Object(u.jsx)(x.a.Row,{children:Object(u.jsxs)(B.a.Group,{centered:!0,children:[Object(u.jsxs)(B.a,{fluid:!0,style:{width:300},children:[Object(u.jsx)(B.a.Content,{style:{backgroundColor:"#1DB954",color:"white"},children:Object(u.jsx)(g.a,{textAlign:"center",children:"Games"})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Total Games Played: ",j.length]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Total Points Scored: ",h]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Average Score: ",v]})})]}),Object(u.jsxs)(B.a,{fluid:!0,color:"black",style:{width:300},children:[Object(u.jsx)(B.a.Content,{color:"black",style:{backgroundColor:"#1DB954"},children:Object(u.jsx)(g.a,{textAlign:"center",children:"Overall"})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Total Answers: ",A]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Total Correct Answers: ",O]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Total Answer Accuracy:  ",C," %"]})})]}),Object(u.jsxs)(B.a,{fluid:!0,style:{width:300},children:[Object(u.jsx)(B.a.Content,{style:{backgroundColor:"#1DB954"},children:Object(u.jsx)(g.a,{textAlign:"center",children:"Songs"})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Total Songs Played: ",b]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Correct Song Answers: ",y]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Song Answer Accuracy:  ",k," % "]})})]}),Object(u.jsxs)(B.a,{fluid:!0,style:{width:300},children:[Object(u.jsx)(B.a.Content,{style:{backgroundColor:"#1DB954"},children:Object(u.jsx)(g.a,{textAlign:"center",children:"Artists"})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Songs Played: ",b]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Correct Artist Answers: ",f]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Artist Answer Accuracy:  ",S," %"]})})]}),Object(u.jsxs)(B.a,{fluid:!0,style:{width:300},children:[Object(u.jsx)(B.a.Content,{style:{backgroundColor:"#1DB954"},children:Object(u.jsx)(g.a,{textAlign:"center",children:"Categories"})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Most Played: ",T[0]]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Highest Score: ",I," "]})}),Object(u.jsx)(B.a.Content,{children:Object(u.jsxs)(g.a,{textAlign:"center",children:["Best Category: ",N," "]})})]})]})})})})]})}),L=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(j,{children:[Object(u.jsx)(i.b,{exact:!0,path:"/",children:Object(u.jsx)(G,{})}),Object(u.jsx)(i.b,{exact:!0,path:"/game",children:Object(u.jsx)(P,{})}),Object(u.jsx)(i.b,{exact:!0,path:"/leaderboard",children:Object(u.jsx)(D,{})}),Object(u.jsx)(i.b,{exact:!0,path:"/stats",children:Object(u.jsx)(_,{})}),Object(u.jsx)(i.b,{exact:!0,path:"/chart"})]})})},E=n(20),W=n(21),Y=n(111),q=n(37),J=n(36),K=function(e){Object(q.a)(n,e);var t=Object(J.a)(n);function n(e){var c;return Object(E.a)(this,n),(c=t.call(this,e)).state={isAuthenticatedWithSpotify:!1},c.state.handleRedirect=c.handleRedirect.bind(Object(Y.a)(c)),c}return Object(W.a)(n,[{key:"generateRandomString",value:function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}},{key:"getHashParams",value:function(){for(var e={},t=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1),c=t.exec(n);c;)e[c[1]]=decodeURIComponent(c[2]),c=t.exec(n);return e}},{key:"componentDidMount",value:function(){var e=this.getHashParams();console.log(e);var t=e.access_token;console.log("hihihih");var n=e.state,c=localStorage.getItem("stateKey");localStorage.setItem("spotifyAuthToken",t),window.localStorage.getItem("spotifyAuthToken")&&"undefined"!=window.localStorage.getItem("spotifyAuthToken")&&this.setState({isAuthenticatedWithSpotify:!0}),!t||null!=n&&n===c?localStorage.removeItem("stateKey"):alert('Click "ok" to finish authentication with Spotify')}},{key:"handleRedirect",value:function(e){e.preventDefault(),console.log("You linked your Spotify account!","success");var t=this.getHashParams().access_token;console.log(t);var n=this.generateRandomString(16);localStorage.setItem("stateKey",n);var c="https://accounts.spotify.com/authorize";c+="?response_type=token",c+="&client_id="+encodeURIComponent("6129ade14f2c4dbda3511c026bd444ad"),c+="&scope="+encodeURIComponent("user-read-private%20streaming%20user-read-email%20streaming%20user-read-email%20user-read-private%20user-read-playback-state%20user-modify-playback-state%20user-library-read%20user-library-modify"),c+="&redirect_uri="+encodeURIComponent("https://sonicspot.herokuapp.com/login"),c+="&state="+encodeURIComponent(n),c+="&show_dialog="+encodeURIComponent(!0),window.location=c}},{key:"render",value:function(){var e=this;return localStorage.getItem("spotifyAuthToken")&&"undefined"!=localStorage.getItem("spotifyAuthToken")?Object(u.jsxs)("div",{className:"button_container",children:[Object(u.jsx)(g.a,{style:{fontSize:50},className:"title is-4",children:Object(u.jsx)("font",{color:"#121212",children:"You're All Set!"})}),Object(u.jsx)("div",{className:"Line"}),Object(u.jsx)("br",{}),Object(u.jsx)(k.a,{color:"green",fluid:!0,size:"large",type:"submit",onClick:function(e){return window.location.href="/"},children:"Continue"})]}):Object(u.jsxs)("div",{className:"button_container",children:[Object(u.jsx)(g.a,{style:{fontSize:50},className:"title is-4",children:Object(u.jsx)("font",{color:"#121212",children:"Please Log In To Your Premium Spotify Account"})}),Object(u.jsx)("div",{className:"Line"}),Object(u.jsx)("br",{}),Object(u.jsx)(k.a,{color:"green",fluid:!0,size:"large",type:"submit",onClick:function(t){return e.handleRedirect(t)},children:"Sign In To Spotify"})]})}}]),n}(c.Component),V=function(e){var t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(i.f)(),o=Object(c.useState)(""),s=Object(l.a)(o,2),d=s[0],j=s[1],h=Object(c.useState)(""),b=Object(l.a)(h,2),O=b[0];b[1];return Object(c.useEffect)((function(){localStorage.getItem("sonic_user")&&"undefined"!=localStorage.getItem("sonic_user")?j(!0):j(!1)}),[d]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("dialog",{className:"dialog dialog--auth",ref:n,children:[Object(u.jsx)("div",{children:"User does not exist"}),Object(u.jsx)("button",{className:"button--close",onClick:function(e){return n.current.close()},children:"Close"})]}),d?O?Object(u.jsx)(k.a,{color:"green",fluid:!0,size:"large",type:"submit",children:"Login"}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(x.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(u.jsxs)(x.a.Column,{style:{maxWidth:450},children:[Object(u.jsx)(p.a,{children:Object(u.jsx)(K,{})}),Object(u.jsx)(g.a,{as:"h1",color:"#121212",textAlign:"center",children:"Can you hear the music?"})]})})}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(x.a,{textAlign:"center",style:{height:"100vh"},verticalAlign:"middle",children:Object(u.jsxs)(x.a.Column,{style:{maxWidth:450},children:[Object(u.jsx)(g.a,{as:"h2",color:"#121212",textAlign:"center",children:"Sign in to your account"}),Object(u.jsx)(y.a,{size:"large",onSubmit:function(e){e.preventDefault(),fetch("https://sonicserve.herokuapp.com/users?email=".concat(t.current.value)).then((function(e){return e.json()})).then((function(e){return!!e.length&&e[0]})).then((function(e){e?(localStorage.setItem("sonic_user",e.id),j(!0),r.push("/login")):n.current.showModal()}))},children:Object(u.jsxs)(C.a,{stacked:!0,children:[Object(u.jsx)("input",{ref:t,type:"email",id:"email",required:!0,autoFocus:!0,fluid:!0,icon:"user",iconPosition:"left",placeholder:"E-mail address"}),Object(u.jsx)(k.a,{color:"green",fluid:!0,size:"large",type:"submit",children:"Login"})]})}),Object(u.jsxs)(w.a,{children:["New to us? ",Object(u.jsx)(a.b,{to:"/register",children:"Sign Up"})]})]})})})]})},X=function(e){var t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useRef)(),o=(Object(c.useRef)(),Object(c.useRef)()),s=Object(c.useRef)(),a=Object(i.f)(),l=Object(i.f)();return Object(u.jsx)("main",{style:{textAlign:"center"},children:Object(u.jsx)(x.a,{textAlign:"center",style:{height:"100vh",width:"500"},verticalAlign:"middle",children:Object(u.jsx)(x.a.Column,{style:{maxWidth:700},children:Object(u.jsxs)(x.a.Row,{children:[Object(u.jsxs)("dialog",{className:"dialog dialog--new",ref:s,children:[Object(u.jsx)("div",{children:"User created successfully!"}),Object(u.jsx)("button",{className:"button--close",onClick:function(e){s.current.close(),a.push("/login")},children:"Close"})]}),Object(u.jsxs)("dialog",{className:"dialog dialog--password",ref:o,children:[Object(u.jsx)("div",{children:"Account with that email address already exists"}),Object(u.jsx)("button",{className:"button--close",onClick:function(e){return o.current.close()},children:"Close"})]}),Object(u.jsx)(y.a,{style:{maxWidth:700},size:"large",className:"form--login",onSubmit:function(e){e.preventDefault(),fetch("https://sonicserve.herokuapp.com/users?email=".concat(r.current.value)).then((function(e){return e.json()})).then((function(e){return!!e.length})).then((function(e){e?o.current.showModal():fetch("https://sonicserve.herokuapp.com/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r.current.value,name:"".concat(t.current.value," ").concat(n.current.value),userName:l.current.value})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("id")&&(localStorage.setItem("sonic_user",e.id),s.current.showModal())}))}))},children:Object(u.jsxs)(C.a,{stacked:!0,children:[Object(u.jsx)(g.a,{children:"Register New Account"}),Object(u.jsx)("label",{htmlFor:"firstName",children:" First Name "}),Object(u.jsx)("input",{ref:t,type:"text",name:"firstName",className:"form-control",placeholder:"First name",required:!0,autoFocus:!0}),Object(u.jsx)("label",{htmlFor:"lastName",children:" Last Name "}),Object(u.jsx)("input",{ref:n,type:"text",name:"lastName",className:"form-control",placeholder:"Last name",required:!0}),Object(u.jsx)("label",{htmlFor:"inputEmail",children:" Email address "}),Object(u.jsx)("input",{ref:r,type:"email",name:"email",className:"form-control",placeholder:"Email address",required:!0}),Object(u.jsx)("label",{htmlFor:"userName",children:" Username "}),Object(u.jsx)("input",{ref:l,type:"text",name:"userName",className:"form-control",placeholder:"Username",required:!0}),Object(u.jsx)(k.a,{color:"green",type:"submit",children:" Sign in "})]})})]})})})})},Z=(n(185),function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(i.b,{path:"/",render:function(){return localStorage.getItem("sonic_user")&&"undefined"!==localStorage.getItem("sonic_user")?Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(L,{})}):Object(u.jsx)(i.a,{to:"/login"})}}),Object(u.jsx)(i.b,{path:"/login",children:Object(u.jsx)(V,{})}),Object(u.jsx)(i.b,{path:"/register",children:Object(u.jsx)(X,{})})]})}),Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,211)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),o(e),s(e)}))};n(186);s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(a.a,{children:Object(u.jsx)(Z,{})})}),document.getElementById("root")),Q()}},[[187,1,2]]]);
//# sourceMappingURL=main.0f7b1e9d.chunk.js.map